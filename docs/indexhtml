<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Telegram Slots Web App</title>
<style>
  body { font-family: Arial, sans-serif; background: #121212; color: #eee; text-align: center; padding: 2rem; }
  #slots { font-size: 5rem; margin: 2rem 0; }
  button { font-size: 1.5rem; padding: 1rem 3rem; border: none; border-radius: 12px; background: #4caf50; color: white; cursor: pointer; }
  #balance { font-size: 1.3rem; margin-top: 1rem; }
</style>
</head>
<body>

<h1>–°–ª–æ—Ç—ã –≤ Telegram</h1>
<div id="slots">üçí üçã üçâ</div>
<button id="play">–ò–≥—Ä–∞—Ç—å</button>
<div id="balance">–ë–∞–ª–∞–Ω—Å: 1000</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  let balance = 1000;
  const symbols = ["üçí", "üçã", "üçâ", "üçá", "üîî", "‚≠ê", "7Ô∏è‚É£"];
  const slots = document.getElementById("slots");
  const balanceDiv = document.getElementById("balance");
  const playBtn = document.getElementById("play");

  function spin() {
    let result = [];
    for (let i = 0; i < 3; i++) {
      result.push(symbols[Math.floor(Math.random() * symbols.length)]);
    }
    return result;
  }

  function isWin(res) {
    return res[0] === res[1] && res[1] === res[2];
  }

  function updateBalance(amount) {
    balance += amount;
    balanceDiv.textContent = "–ë–∞–ª–∞–Ω—Å: " + balance;
  }

  playBtn.onclick = () => {
    let bet = 100;
    if (bet > balance) {
      alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç");
      return;
    }
    updateBalance(-bet);

    let animationCount = 0;
    let interval = setInterval(() => {
      slots.textContent = spin().join(" ");
      animationCount++;
      if (animationCount > 10) {
        clearInterval(interval);
        let finalResult = spin();
        slots.textContent = finalResult.join(" ");
        if (isWin(finalResult)) {
          let win = bet * 5;
          alert(`üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} –º–æ–Ω–µ—Ç!`);
          updateBalance(win);
        } else {
          alert("–£–≤—ã, –Ω–µ –≤—ã–∏–≥—Ä–∞–ª–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë.");
        }
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –±–∞–ª–∞–Ω—Å –≤ –±–æ—Ç–∞
        tg.sendData(JSON.stringify({result: finalResult, balance}));
      }
    }, 100);
  };
</script>

</body>
</html>
